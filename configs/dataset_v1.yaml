# Dataset Configuration v1
# Comprehensive settings for all DDE families

version: "1.0"
description: "Benchmark dataset configuration for DDE-FNO"

# Global settings
global:
  tau_max: 2.0          # Maximum delay (history window)
  T: 20.0               # Solution horizon
  dt_out: 0.05          # Output time step
  N_hist: 256           # History grid points
  seed: 42
  
  # Solver settings
  solver:
    reltol: 1.0e-6
    abstol: 1.0e-8
    maxiters: 10000000
    
  # Reference solver (for label fidelity checks)
  solver_reference:
    reltol: 1.0e-9
    abstol: 1.0e-11
    method: "Vern9"
    
  # QC thresholds
  qc:
    y_clip: 100.0
    continuity_tol: 1.0e-4
    max_retries: 10

# Per-family configurations
families:
  linear2:
    enabled: true
    state_dim: 1
    param_names: ["a", "b1", "b2", "tau1", "tau2"]
    param_ranges:
      a: [-2.0, 1.0]
      b1: [-2.0, 2.0]
      b2: [-2.0, 2.0]
      tau1: [0.1, 2.0]
      tau2: [0.1, 2.0]
    requires_positive: false
    y_clip: 1000.0
    
    # OOD splits
    ood_delay:
      train: {tau1: [0.1, 1.3], tau2: [0.1, 1.3]}
      test: {tau1: [1.3, 2.0], tau2: [1.3, 2.0]}
    ood_params:
      train: {b1: [-1.5, 1.5], b2: [-1.5, 1.5]}
      test: {b1: [1.5, 2.0], b2: [1.5, 2.0]}
      
  hutch:
    enabled: true
    state_dim: 1
    param_names: ["r", "K", "tau"]
    param_ranges:
      r: [0.5, 3.0]
      K: [0.5, 2.0]
      tau: [0.1, 2.0]
    requires_positive: true
    y_clip: 100.0
    
    ood_delay:
      train: {tau: [0.1, 1.3]}
      test: {tau: [1.3, 2.0]}
    ood_params:
      train: {r: [0.5, 2.5]}
      test: {r: [2.5, 3.0]}
      
  mackey_glass:
    enabled: true
    state_dim: 1
    param_names: ["beta", "gamma", "tau", "n"]
    param_ranges:
      beta: [1.0, 4.0]
      gamma: [0.5, 3.0]
      tau: [0.2, 2.0]
      n: [10.0, 10.0]  # fixed
    requires_positive: true
    y_clip: 50.0
    
    ood_delay:
      train: {tau: [0.2, 1.3]}
      test: {tau: [1.3, 2.0]}
    ood_params:
      train: {beta: [1.0, 3.0]}
      test: {beta: [3.0, 4.0]}
      
  vdp:
    enabled: true
    state_dim: 2
    param_names: ["mu", "kappa", "tau"]
    param_ranges:
      mu: [0.5, 3.0]
      kappa: [-2.0, 2.0]
      tau: [0.1, 2.0]
    requires_positive: false
    y_clip: 50.0
    
    ood_delay:
      train: {tau: [0.1, 1.3]}
      test: {tau: [1.3, 2.0]}
    ood_params:
      train: {mu: [0.5, 2.0]}
      test: {mu: [2.0, 3.0]}
      
  predator_prey:
    enabled: true
    state_dim: 2
    param_names: ["alpha", "beta", "gamma", "delta", "tau1", "tau2"]
    param_ranges:
      alpha: [0.5, 2.0]
      beta: [0.5, 2.0]
      gamma: [0.5, 2.0]
      delta: [0.5, 2.0]
      tau1: [0.1, 2.0]
      tau2: [0.1, 2.0]
    requires_positive: true
    y_clip: 100.0
    
    ood_delay:
      train: {tau1: [0.1, 1.3], tau2: [0.1, 1.3]}
      test: {tau1: [1.3, 2.0], tau2: [1.3, 2.0]}
      
  dist_uniform:
    enabled: true
    state_dim: 2
    param_names: ["r", "K", "tau"]
    param_ranges:
      r: [0.5, 2.5]
      K: [0.5, 2.0]
      tau: [0.1, 2.0]
    requires_positive: true
    y_clip: 100.0
    
    ood_delay:
      train: {tau: [0.1, 1.3]}
      test: {tau: [1.3, 2.0]}
      
  dist_exp:
    enabled: true
    state_dim: 2
    param_names: ["r", "K", "tau", "lambda"]
    param_ranges:
      r: [0.5, 2.5]
      K: [0.5, 2.0]
      tau: [0.1, 2.0]
      lambda: [0.5, 5.0]
    requires_positive: true
    y_clip: 100.0
    
    ood_delay:
      train: {tau: [0.1, 1.3]}
      test: {tau: [1.3, 2.0]}

# Dataset splits
splits:
  train:
    n_samples: 800
    seed_offset: 0
  val:
    n_samples: 100
    seed_offset: 100000
  test_id:
    n_samples: 100
    seed_offset: 200000
    description: "In-distribution test"
  test_ood_delay:
    n_samples: 100
    seed_offset: 300000
    description: "OOD delay test"
  test_ood_params:
    n_samples: 100
    seed_offset: 400000
    description: "OOD parameter test"
  test_horizon:
    n_samples: 100
    seed_offset: 500000
    T: 40.0  # Double horizon
    description: "Extended horizon test"

# Benchmark settings
benchmarks:
  label_fidelity:
    n_samples: 200
    seed: 999
  residual_check:
    n_samples: 200
  diversity:
    compute_fft: true
    compute_settling_time: true
